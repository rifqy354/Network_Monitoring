{# templates/index.j2 #}
<!DOCTYPE html>
<html>
<head>
    <title>Network Data Mining Results</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333366; }
        table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .device-card {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            background-color: #f8f8f8;
        }
        .device-card h2 {
            margin-top: 0;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .report-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .report-link {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            border-radius: 4px;
            display: inline-block;
        }
        .topology-section {
            margin-top: 30px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Network Data Mining Results</h1>
    <p>Report generated on: {{ timestamp }}</p>
    
    <h2>Device Reports</h2>
    {% for host in groups['switches'] %}
    <div class="device-card">
        <h2>{{ host }}</h2>
        <p>Model: {{ hostvars[host]['switch_facts'].ansible_facts.ansible_net_model if 'switch_facts' in hostvars[host] else 'Unknown' }}</p>
        <p>IOS Version: {{ hostvars[host]['switch_facts'].ansible_facts.ansible_net_version if 'switch_facts' in hostvars[host] else 'Unknown' }}</p>
        
        <div class="report-links">
            <a href="{{ host }}_interface_report.html" class="report-link">Interface Report</a>
            <a href="{{ host }}_utilization_report.html" class="report-link">Utilization Report</a>
            <a href="{{ host }}_vlan_report.html" class="report-link">VLAN Report</a>
            <a href="{{ host }}_port_status.html" class="report-link">Port Status</a>
            <a href="{{ host }}_interfaces.csv" class="report-link">Interface CSV Data</a>
        </div>
    </div>
    {% endfor %}
    
    <div class="topology-section">
        <h2>Network Topology</h2>
        <img src="network_topology.png" alt="Network Topology Map" style="max-width: 100%;">
        <p><a href="network_topology.dot" class="report-link">Download DOT File</a></p>
    </div>
    
    <footer>
        <p>Generated by Ansible and Jinja2</p>
    </footer>
</body>
</html>
